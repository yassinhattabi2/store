import{a1 as g,a2 as u,a3 as P,r as o,j as s,B as n,H as y,C as S,h as C,T as i,a4 as b,a5 as T,G as d,a6 as p,y as x,J as B,a7 as q,Y as v,Z as $,$ as k,a8 as D}from"./index-DL1FNKyW.js";const E=g({password:u().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:u().oneOf([P("password"),null],"Passwords must match").required("Confirm Password is required")}),F=()=>{const[l,t]=o.useState(!1),[h,c]=o.useState(!1),[m,w]=o.useState(""),f=async r=>{t(!0);const e=localStorage.getItem("token");if(!e){alert("No valid authentication token found."),t(!1);return}try{const a=await fetch("http://localhost:5000/api/update-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({password:r.password})});if(a.ok)w("Password updated successfully!"),c(!0),setTimeout(()=>{c(!1)},2e3);else{const j=await a.json();alert(`Error: ${j.message}`)}}catch(a){console.error("Error updating password:",a),alert("An error occurred while updating the password.")}finally{t(!1)}};return s.jsxs(n,{sx:{p:4},children:[s.jsx(y,{children:s.jsx("title",{children:"Setting"})}),s.jsx(S,{children:s.jsxs(C,{children:[s.jsx(i,{variant:"h6",gutterBottom:!0,children:"Update Password"}),s.jsx(i,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Please enter your new password and confirm it."}),s.jsx(b,{initialValues:{password:"",confirmPassword:""},validationSchema:E,onSubmit:f,children:({touched:r,errors:e})=>s.jsxs(T,{children:[s.jsxs(d,{container:!0,spacing:2,sx:{mt:1},children:[s.jsx(d,{item:!0,xs:12,children:s.jsx(p,{name:"password",as:x,label:"Password",fullWidth:!0,type:"password",error:r.password&&!!e.password,helperText:r.password&&e.password,required:!0})}),s.jsx(d,{item:!0,xs:12,children:s.jsx(p,{name:"confirmPassword",as:x,label:"Confirm Password",fullWidth:!0,type:"password",error:r.confirmPassword&&!!e.confirmPassword,helperText:r.confirmPassword&&e.confirmPassword,required:!0})})]}),s.jsx(n,{sx:{textAlign:"right",mt:3},children:s.jsx(B,{variant:"contained",color:"primary",type:"submit",disabled:l,children:l?s.jsx(q,{size:24,color:"inherit"}):"Update Password"})})]})})]})}),s.jsxs(v,{open:h,children:[s.jsx($,{children:"Success"}),s.jsx(k,{children:s.jsxs(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[s.jsx(D,{color:"success",sx:{fontSize:50,mb:2}}),s.jsx(i,{variant:"h6",align:"center",children:m})]})})]})]})};export{F as default};
