import{ao as u,j as s,H as P,a4 as g,a1 as f,a2 as c,a3 as j,t as y}from"./index-CLLn0rYl.js";import{a as C,C as b,B as d,T as t,F as l,b as m,I as w,S,c as q,e as E,d as v}from"./ErrorOutline-BCFI52ru.js";import{E as B}from"./appbar-D_RuDL8j.js";const k=f().shape({newPassword:c().min(8,"Password must be at least 8 characters").required("New password is required"),confirmPassword:c().oneOf([j("newPassword")],"Passwords must match").required("Confirm password is required")}),F=E({typography:{fontSize:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.25rem",xl:"1.5rem"}},colorSchemes:{light:{palette:{primary:{100:"#e0f7fa"}}}}}),x=({message:o})=>s.jsxs(d,{sx:{display:"flex",alignItems:"center",backgroundColor:"rgba(255, 0, 0, 0.1)",color:"red",padding:"8px 12px",borderRadius:"4px",marginTop:"4px"},children:[s.jsx(v,{sx:{marginRight:1}}),s.jsx(t,{level:"body-xs",children:o})]});function H(){const o=u(),p=new URLSearchParams(o.search).get("id"),h=async n=>{try{(await y.post("http://localhost:5000/api/reset-password",{userId:p,newPassword:n.newPassword})).status===200&&alert("Password changed successfully")}catch(r){console.error("Error changing password:",r.response?r.response.data:r),alert("Error changing password")}};return s.jsxs(s.Fragment,{children:[s.jsx(P,{children:s.jsx("title",{children:"Change password"})}),s.jsx(C,{}),s.jsxs(b,{theme:F,children:[s.jsx(B,{}),s.jsx(d,{sx:{backgroundColor:"primary.100",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",px:9,marginLeft:"25%"},children:s.jsxs(d,{sx:{display:"flex",flexDirection:"column",gap:3,width:500,maxWidth:"100%",mx:"auto",p:3,borderRadius:"sm"},children:[s.jsx(t,{component:"h1",level:"h3",children:"Change Password"}),s.jsx(t,{level:"body-sm",children:"Enter your new password to reset your account password."}),s.jsx(g,{initialValues:{newPassword:"",confirmPassword:""},validationSchema:k,onSubmit:h,children:({handleSubmit:n,handleChange:r,values:i,errors:e,touched:a})=>s.jsxs("form",{onSubmit:n,children:[s.jsxs(l,{required:!0,children:[s.jsx(m,{children:"New Password"}),s.jsx(w,{type:"password",name:"newPassword",value:i.newPassword,onChange:r,error:a.newPassword&&!!e.newPassword}),a.newPassword&&e.newPassword&&s.jsx(x,{message:e.newPassword})]}),s.jsxs(l,{required:!0,children:[s.jsx(m,{children:"Confirm Password"}),s.jsx(w,{type:"password",name:"confirmPassword",value:i.confirmPassword,onChange:r,error:a.confirmPassword&&!!e.confirmPassword}),a.confirmPassword&&e.confirmPassword&&s.jsx(x,{message:e.confirmPassword})]}),s.jsx(S,{sx:{gap:2,mt:2},children:s.jsx(q,{sx:{fontSize:"md"},children:"Click Me"})})]})})]})})]})]})}export{H as default};
