import{z as w,j as e,a as _,g as A,s as F,S as N,D as O,E as y,_ as j,F as V,r,u as W,b as J,c as K,d as Q,I as X,H as Y,y as Z,T as i,J as E,K as G,N as ee,O as se,Q as R,U as n,V as te,B as H,A as oe,W as ne,X as ae,Y as re,Z as ce,$ as le,a0 as ie}from"./index-DL1FNKyW.js";const de=w(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),he=w(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),xe=w(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ue(t){return A("MuiCheckbox",t)}const T=_("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),pe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],me=t=>{const{classes:o,indeterminate:a,color:u,size:d}=t,h={root:["root",a&&"indeterminate",`color${y(u)}`,`size${y(d)}`]},p=Q(h,ue,o);return j({},o,p)},je=F(N,{shouldForwardProp:t=>O(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:a}=t;return[o.root,a.indeterminate&&o.indeterminate,o[`size${y(a.size)}`],a.color!=="default"&&o[`color${y(a.color)}`]]}})(({theme:t,ownerState:o})=>j({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${o.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[o.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:V(o.color==="default"?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${T.checked}, &.${T.indeterminate}`]:{color:(t.vars||t).palette[o.color].main},[`&.${T.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),ge=e.jsx(he,{}),Ce=e.jsx(de,{}),be=e.jsx(xe,{}),M=r.forwardRef(function(o,a){var u,d;const h=W({props:o,name:"MuiCheckbox"}),{checkedIcon:p=ge,color:I="primary",icon:S=Ce,indeterminate:x=!1,indeterminateIcon:c=be,inputProps:g,size:m="medium",className:C}=h,z=J(h,pe),b=x?c:S,v=x?c:p,f=j({},h,{color:I,indeterminate:x,size:m}),k=me(f);return e.jsx(je,j({type:"checkbox",inputProps:j({"data-indeterminate":x},g),icon:r.cloneElement(b,{fontSize:(u=b.props.fontSize)!=null?u:m}),checkedIcon:r.cloneElement(v,{fontSize:(d=v.props.fontSize)!=null?d:m}),ownerState:f,ref:a,className:K(k.root,C)},z,{classes:k}))}),fe=()=>{const[t,o]=r.useState([]),[a,u]=r.useState(5),[d,h]=r.useState(0),[p,I]=r.useState(""),[S,x]=r.useState(!0),[c,g]=r.useState(null),[m,C]=r.useState(!1);r.useEffect(()=>{(async()=>{x(!0);try{const P=await(await fetch("http://localhost:5000/api/users")).json();o(P)}catch(l){console.error("Error fetching users:",l)}finally{x(!1)}})()},[]);const z=s=>{I(s.target.value)},b=(s,l)=>{h(l)},v=s=>{u(parseInt(s.target.value,10)),h(0)},f=async(s,l)=>{try{const $=await(await fetch(`http://localhost:5000/api/users/${s}/toggle-status`,{method:"PUT"})).json();$.success?o(L=>L.map(B=>B.idClient===s?{...B,statue:l==="Débloqué"?"Bloqué":"Débloqué"}:B)):console.error("Failed to toggle status:",$.error)}catch(P){console.error("Error toggling user status:",P)}},k=s=>{g(s),C(!0)},D=()=>{C(!1),g(null)},U=t.filter(s=>s.nom.toLowerCase().includes(p.toLowerCase())),q=()=>{const s=document.getElementById("user-table"),l=window.open("","","height=500,width=800");l.document.write(s.innerHTML),l.document.close(),l.print()};return e.jsxs(X,{elevation:3,sx:{p:3},children:[e.jsx(Y,{children:e.jsx("title",{children:"Client"})}),e.jsx(Z,{label:"Search user...",variant:"outlined",fullWidth:!0,margin:"normal",onChange:z,value:p}),S?e.jsx(i,{variant:"h6",align:"center",children:"Loading users..."}):e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"contained",onClick:q,sx:{marginBottom:2},children:"Print Users"}),e.jsx(G,{id:"user-table",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsxs(R,{children:[e.jsx(n,{padding:"checkbox",children:e.jsx(M,{})}),e.jsx(n,{children:"Nom"}),e.jsx(n,{children:"Prenom"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Telephone"}),e.jsx(n,{children:"Adresse"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(te,{children:U.slice(d*a,d*a+a).map(s=>e.jsxs(R,{onClick:()=>k(s),children:[e.jsx(n,{padding:"checkbox",children:e.jsx(M,{})}),e.jsx(n,{children:e.jsxs(H,{display:"flex",alignItems:"center",children:[e.jsx(oe,{src:s.avatar,alt:s.nom,sx:{mr:2}}),s.nom]})}),e.jsx(n,{children:s.prenom}),e.jsx(n,{children:s.email}),e.jsx(n,{children:s.tel}),e.jsx(n,{children:s.adresse}),e.jsx(n,{children:e.jsx(i,{variant:"body2",color:s.statue==="Débloqué"?"green":"red",children:s.statue})}),e.jsx(n,{children:e.jsx(ne,{onClick:()=>f(s.idClient,s.statue),"aria-label":"Toggle Status",children:e.jsx(i,{color:s.statue==="Débloqué"?"error":"primary",children:s.statue==="Débloqué"?"Bloquer":"Débloquer"})})})]},s.idClient))})]})}),e.jsx(ae,{component:"div",count:U.length,page:d,onPageChange:b,rowsPerPage:a,onRowsPerPageChange:v})]}),e.jsxs(re,{open:m,onClose:D,children:[e.jsx(ce,{children:"User Details"}),e.jsx(le,{children:c&&e.jsxs(H,{children:[e.jsxs(i,{variant:"h6",children:["Nom: ",c.nom]}),e.jsxs(i,{variant:"subtitle1",children:["Prenom: ",c.prenom]}),e.jsxs(i,{variant:"subtitle1",children:["Email: ",c.email]}),e.jsxs(i,{variant:"subtitle1",children:["Telephone: ",c.tel]}),e.jsxs(i,{variant:"subtitle1",children:["Adresse: ",c.adresse]}),e.jsxs(i,{variant:"subtitle1",children:["Status: ",c.statue]})]})}),e.jsx(ie,{children:e.jsx(E,{onClick:D,color:"primary",children:"Close"})})]})]})};export{fe as default};
